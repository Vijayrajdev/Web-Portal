<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ACE Exam Simulator (Set 2)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f5f9; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
        .fade-in { animation: fadeIn 0.3s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
        .option-card:hover { border-color: #3b82f6; background-color: #eff6ff; }
        .option-selected { border-color: #2563eb; background-color: #dbeafe; ring: 2px solid #2563eb; }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 font-sans h-screen flex flex-col overflow-hidden">

    <!-- Header -->
    <header class="bg-white border-b border-slate-200 h-16 flex items-center justify-between px-6 shadow-sm z-10">
        <div class="flex items-center gap-3">
            <div class="w-10 h-10 bg-indigo-600 rounded-lg flex items-center justify-center text-white text-xl font-bold shadow-lg shadow-indigo-200">
                <i class="fa-solid fa-server"></i>
            </div>
            <div>
                <h1 class="font-bold text-lg text-slate-800 tracking-tight">ACE Simulator: Hard Mode</h1>
                <p class="text-xs text-slate-500 font-medium">Set 2: Networking, GKE, Storage Deep Dive</p>
            </div>
        </div>
        
        <div id="quiz-controls" class="hidden flex items-center gap-6">
            <div class="flex flex-col items-end">
                <span class="text-xs text-slate-400 font-bold uppercase tracking-wider">Time</span>
                <span id="timer" class="font-mono text-xl font-bold text-slate-700">60:00</span>
            </div>
            <div class="h-8 w-px bg-slate-200"></div>
            <div class="flex flex-col items-end">
                <span class="text-xs text-slate-400 font-bold uppercase tracking-wider">Progress</span>
                <span id="progress-text" class="font-mono text-xl font-bold text-indigo-600">1/50</span>
            </div>
            <button onclick="finishQuiz()" class="px-4 py-2 bg-slate-800 hover:bg-slate-900 text-white text-sm font-bold rounded-lg transition shadow-md">
                Finish
            </button>
        </div>
    </header>

    <!-- Main -->
    <main class="flex-1 overflow-hidden relative">
        <!-- Welcome -->
        <div id="welcome-screen" class="absolute inset-0 flex items-center justify-center p-4 fade-in">
            <div class="bg-white max-w-2xl w-full p-8 rounded-2xl shadow-xl border border-slate-100 text-center">
                <div class="w-20 h-20 bg-indigo-50 rounded-full flex items-center justify-center mx-auto mb-6 text-indigo-600 text-4xl">
                    <i class="fa-solid fa-graduation-cap"></i>
                </div>
                <h2 class="text-3xl font-extrabold text-slate-900 mb-3">Hard Difficulty Practice</h2>
                <p class="text-slate-600 mb-8 text-lg">
                    50 Fresh Questions from your dumps focusing on <strong>Shared VPC, GKE Node Pools, Preemptible VMs, and Storage Security</strong>.
                </p>
                <button onclick="startQuiz()" class="w-full py-4 bg-indigo-600 hover:bg-indigo-700 text-white font-bold text-lg rounded-xl shadow-lg shadow-indigo-200 transition transform hover:scale-[1.02]">
                    Start Exam
                </button>
            </div>
        </div>

        <!-- Quiz UI -->
        <div id="quiz-interface" class="hidden h-full flex flex-col md:flex-row">
            <div class="w-full md:w-72 bg-slate-50 border-r border-slate-200 overflow-y-auto hidden md:block p-4">
                <div id="nav-grid" class="grid grid-cols-5 gap-2"></div>
            </div>
            <div class="flex-1 overflow-y-auto bg-slate-50/50 p-4 md:p-8 flex justify-center">
                <div class="w-full max-w-3xl">
                    <div id="question-card" class="bg-white rounded-2xl shadow-sm border border-slate-200 p-6 md:p-8 fade-in">
                        <div class="flex justify-between items-start mb-6">
                            <span class="px-3 py-1 bg-indigo-100 text-indigo-700 text-xs font-bold rounded-full uppercase tracking-wide">Q <span id="q-num">1</span></span>
                            <span class="text-xs text-slate-400" id="q-source"></span>
                        </div>
                        <h3 id="q-text" class="text-xl font-bold text-slate-900 mb-8 leading-relaxed"></h3>
                        <div id="options-container" class="space-y-3"></div>
                        <div class="mt-8 flex justify-between items-center pt-6 border-t border-slate-100">
                            <button onclick="prevQuestion()" id="prev-btn" class="px-4 py-2 text-slate-500 font-semibold transition disabled:opacity-50">Previous</button>
                            <button onclick="nextQuestion()" id="next-btn" class="px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-lg shadow-md transition">Next</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Results -->
        <div id="results-screen" class="hidden absolute inset-0 bg-slate-50 overflow-y-auto p-4 md:p-8 fade-in">
            <div class="max-w-4xl mx-auto">
                <div class="bg-white p-8 rounded-2xl shadow-sm border border-slate-200 text-center mb-8">
                    <h2 class="text-3xl font-bold text-slate-900">Score: <span id="score-percent"></span></h2>
                    <p class="text-slate-500">Correct: <span id="stat-correct"></span> | Wrong: <span id="stat-wrong"></span></p>
                    <button onclick="location.reload()" class="mt-6 px-6 py-2 bg-slate-800 text-white rounded-lg font-bold">Retry</button>
                </div>
                <div class="space-y-6" id="review-list"></div>
            </div>
        </div>
    </main>

    <script>
        // --- DATA: 50 Questions (Hard Set) ---
        const questions = [
            // NETWORKING (Shared VPC, DNS, Routes)
            { id: 1, source: "Questions.pdf | Q.129", text: "Your Dataproc cluster runs in a single Virtual Private Cloud (VPC) network in a single subnet with range 172.16.20.128/25. There are no private IP addresses available in the VPC network. You want to add new VMs to communicate with your cluster using the minimum number of steps. What should you do?", options: ["Modify the existing subnet range to 172.16.20.0/24.", "Create a new Secondary IP Range in the VPC.", "Create a new VPC network for the VMs and Peer them.", "Create a new VPC network with subnet 172.32.0.0/16 and Peer."], correct: 0, rationale: "You can expand the primary IP range of a subnet without downtime. Moving /25 to /24 doubles the IPs." },
            { id: 2, source: "Premium.pdf | Q.140", text: "You are given a project with a single VPC and a single subnetwork in us-central1. There is a Compute Engine instance hosting an app in this subnet. You need to deploy a new instance in europe-west1. This new instance needs access to the application via private IP. You want to follow Google-recommended practices. What should you do?", options: ["Create a subnetwork in the same VPC, in europe-west1.", "Create a VPC and subnet in europe-west1 and Peer.", "Create a subnetwork in europe-west1 and use Cloud VPN.", "Create a VPC in europe-west1 and use an Internal LB."], correct: 0, rationale: "VPCs are global. You just add a new regional subnet to the existing VPC and they can talk via private IP by default." },
            { id: 3, source: "Questions.pdf | Q.164", text: "You are designing a new VPC network that will route traffic to networks in your company's private data center. The data center team requires you to use a routing protocol that can dynamically fail over if there is a link failure in the data center. Which routing protocol should you use?", options: ["BGP", "RIP", "OSPF", "Static routing"], correct: 0, rationale: "Cloud Router uses BGP (Border Gateway Protocol) for dynamic routing over VPN/Interconnect." },
            { id: 4, source: "Premium.pdf | Q.91", text: "Your company has a 3-tier solution running on Compute Engine. Tier #1 must communicate with Tier #2, and Tier #2 with Tier #3 on TCP 8080. Each tier has a service account associated with its instances. What should you do?", options: ["Create ingress firewall rules using Source/Target Service Accounts.", "Create ingress rules using IP ranges.", "Create egress rules using Service Accounts.", "Create egress rules using IP ranges."], correct: 0, rationale: "Service Accounts are the best practice for identifying 'Tiers' of applications in firewall rules, rather than brittle IP ranges." },
            { id: 5, source: "Questions.pdf | Q.197", text: "Your organization has a 3-tier web application deployed in the same network on Google Cloud Platform. Each tier scales independently. Network traffic should flow through web to API to database. Traffic should NOT flow between web and database. How should you configure the network?", options: ["Add tags to each tier and set up firewall rules to allow the desired traffic flow.", "Add each tier to a different subnetwork.", "Set up software-based firewalls on individual VMs.", "Add tags to each tier and set up routes."], correct: 0, rationale: "Firewall rules using Tags (or Service Accounts) allow you to micro-segment traffic within the same network." },
            
            // COMPUTE (Preemptible, Sole-tenant, Shielded)
            { id: 6, source: "Questions.pdf | Q.166", text: "You work with a video rendering application that publishes small tasks to Pub/Sub. Each task takes less than 1 hour to complete. You need to minimize rendering costs. What should you do?", options: ["Deploy the application as a managed instance group with Preemptible VMs.", "Deploy as MIG with Committed Use Discount.", "Deploy as MIG with Standard VMs.", "Deploy as MIG with Preemptible VMs and Committed Use Discount."], correct: 0, rationale: "Preemptible VMs are cheapest. Tasks < 1 hour fit well within the 24h limit and interruption risk." },
            { id: 7, source: "Questions.pdf | Q.245", text: "Which of the following is a virtual machine instance that can be terminated by Compute Engine without warning?", options: ["A preemptible VM", "A shared-core VM", "A high-cpu VM", "A standard VM"], correct: 0, rationale: "Preemptible (or Spot) VMs can be reclaimed by Google at any time." },
            { id: 8, source: "Questions.pdf | Q.96", text: "Your company runs its Linux workloads on Compute Engine instances. Your company will be working with a new operations partner that does not use Google Accounts. You need to grant access to the instances to your operations partner so they can maintain the installed tooling. What should you do?", options: ["Enable Cloud IAP and add them as Tunnel User.", "Tag instances and create a firewall rule allowing TCP 22 from the partner's IP.", "Set up Cloud VPN.", "Ask the partner to generate SSH key pairs and add public keys to the VM instances."], correct: 1, rationale: "If they don't have Google Accounts, they can't use IAP (which requires IAM). You must fallback to IP-based firewall allowlisting for SSH." },
            { id: 9, source: "Premium.pdf | Q.128", text: "You need to host an application on a Compute Engine instance in a project shared with other teams. You want to prevent other teams from accidentally causing downtime on that application by deleting it. Which feature should you use?", options: ["Enable deletion protection on the instance.", "Use a Shielded VM.", "Use a Preemptible VM.", "Use a sole-tenant node."], correct: 0, rationale: "Deletion Protection is the specific flag to prevent accidental API deletion calls." },
            { id: 10, source: "Questions.pdf | Q.144", text: "You have a Compute Engine instance hosting an application used between 9 AM and 6 PM on weekdays. You want to back up this instance daily for disaster recovery purposes. You want to keep the backups for 30 days. You want the Google-recommended solution with the least management overhead. What should you do?", options: ["In the Cloud Console, go to Disks and configure a Snapshot Schedule.", "Create a Cloud Function to snapshot daily.", "Create a bash script on the instance.", "Update instance metadata with snapshot-schedule."], correct: 0, rationale: "Snapshot Schedules are the native, managed way to handle backup/retention." },

            // STORAGE (Signed URLs, ACLs vs IAM, Uniform)
            { id: 11, source: "Questions.pdf | Q.246", text: "Regarding Cloud Storage: which of the following allows for time-limited access to buckets and objects without a Google account?", options: ["Signed URLs", "gsutil", "Single sign-on", "Temporary Storage Accounts"], correct: 0, rationale: "Signed URLs give anyone with the link access for a specific time duration." },
            { id: 12, source: "Premium.pdf | Q.114", text: "You are using Container Registry to centrally store your company's container images. In another project, you want to create a GKE cluster. You want to ensure that Kubernetes can download images from Container Registry. What should you do?", options: ["Grant Storage Object Viewer IAM role to the service account used by Kubernetes nodes.", "Configure ACLs on each image.", "Create a P12 key.", "Choose 'Allow full access to all Cloud APIs'."], correct: 0, rationale: "Images are stored in GCS (for GCR). The GKE Node Service Account needs Reader/Viewer access to that storage bucket." },
            { id: 13, source: "Questions.pdf | Q.231", text: "If you do not grant a user named Bob permission to access a Cloud Storage bucket, but then use an ACL to grant access to an object inside that bucket to Bob, what will happen?", options: ["Bob will be able to access the object.", "Bob will access all objects.", "Bob cannot access the object because he lacks bucket access.", "It is not possible to grant access to an object if bucket access is missing."], correct: 0, rationale: "Legacy ACLs allow granular object access even if bucket-level IAM is missing (unless Uniform Bucket Level Access is enabled, which disables ACLs. The question implies ACLs are active)." },
            { id: 14, source: "Questions.pdf | Q.188", text: "The hospital requires that patient information stored in Cloud Storage buckets not leave the geographic areas in which the buckets are hosted. You need to ensure that information stored in Cloud Storage buckets in 'europe-west2' does not leave that area. What should you do?", options: ["Enable VPC Service Controls and create a service perimeter.", "Encrypt the data on-premises.", "Assign IAM storage.objectViewer only to authorized users.", "Create an ACL limiting access."], correct: 0, rationale: "VPC Service Controls (VPCSC) are designed to prevent data exfiltration across boundaries." },
            { id: 15, source: "Premium.pdf | Q.125", text: "You need to set up a policy so that videos stored in a specific Cloud Storage Regional bucket are moved to Coldline after 90 days, and then deleted after one year. How should you set up the policy?", options: ["Use Object Lifecycle Management with Age conditions.", "Use gsutil rewrite.", "Use a Cloud Function.", "Use Cloud Scheduler."], correct: 0, rationale: "Lifecycle Management is the native tool for age-based transitions." },

            // GKE (Node Pools, Upgrades, Repair)
            { id: 16, source: "Premium.pdf | Q.78", text: "You create a new GKE cluster and want to make sure that it always runs a supported and stable version of Kubernetes. What should you do?", options: ["Enable Node Auto-Upgrades.", "Enable Node Auto-Repair.", "Select the latest available cluster version.", "Select Container-Optimized OS."], correct: 0, rationale: "Auto-upgrades keep the nodes in sync with the control plane patch version." },
            { id: 17, source: "Questions.pdf | Q.159", text: "You have a Kubernetes cluster with 1 node-pool. The cluster receives a lot of traffic and needs to grow. You decide to add a node. What should you do?", options: ["Use 'gcloud container clusters resize'.", "Use 'kubectl container clusters resize'.", "Edit the managed instance group directly.", "Enable autoscaling on the instance group."], correct: 0, rationale: "gcloud is the tool for infrastructure (nodes). kubectl is for k8s objects (pods)." },
            { id: 18, source: "Premium.pdf | Q.85", text: "You are creating a GKE cluster with cluster autoscaler enabled. You need to make sure that each node of the cluster will run a monitoring pod that sends container metrics to a third-party solution. What should you do?", options: ["Deploy the monitoring pod in a DaemonSet.", "Deploy in a StatefulSet.", "Reference the pod in a Deployment.", "Use a cluster initializer."], correct: 0, rationale: "DaemonSets run one pod per node, even as nodes scale up/down." },
            { id: 19, source: "Premium.pdf | Q.51", text: "Your existing application running in GKE consists of multiple pods running on four GKE n1-standard-2 nodes. You need to deploy additional pods requiring n2-highmem-16 nodes without any downtime. What should you do?", options: ["Create a new Node Pool with n2-highmem-16 nodes.", "Upgrade the existing cluster.", "Create a new cluster.", "Use Vertical Pod Autoscaling."], correct: 0, rationale: "Node Pools allow you to mix machine types in a single cluster." },
            { id: 20, source: "Questions.pdf | Q.154", text: "A team of data scientists infrequently needs to use a GKE cluster. They require GPUs for some long-running, non-restartable jobs. You want to minimize cost. What should you do?", options: ["Create a node pool with preemptible VMs and GPUs.", "Create a node pool of instances with GPUs and enable autoscaling with min size 0.", "Enable node auto-provisioning.", "Create a VerticalPodAutoscaler."], correct: 1, rationale: "You can't use Preemptible for 'non-restartable' jobs (they get killed). So you use a standard pool but autoscale it to 0 when not in use." },
            
            // SERVERLESS & OTHERS (Filtered for difficulty)
            { id: 21, source: "Premium.pdf | Q.27", text: "You are using GKE with autoscaling. You want to expose a new application to the public using HTTPS on a public IP. What should you do?", options: ["Create a Kubernetes Ingress.", "Create a Service of type ClusterIP.", "Create a Service of type NodePort and configure DNS.", "Use HAProxy on a node."], correct: 0, rationale: "Ingress provides Layer 7 HTTP(S) Load Balancing." },
            { id: 22, source: "Questions.pdf | Q.135", text: "You need to deploy an application packaged in a container image. It exposes an HTTP endpoint and receives very few requests per day. You want to minimize costs. What should you do?", options: ["Deploy on Cloud Run (fully managed).", "Deploy on Cloud Run on GKE.", "Deploy on App Engine Flexible.", "Deploy on GKE."], correct: 0, rationale: "Cloud Run scales to zero and charges only for request time, perfect for 'few requests'." },
            { id: 23, source: "Premium.pdf | Q.173", text: "You want to run a single caching HTTP reverse proxy on GCP. It consumes almost no CPU but needs 30GB in-memory cache. You want to minimize cost. How should you run it?", options: ["Run it on Compute Engine with a custom instance type (high memory, low cpu).", "Create a Cloud Memorystore instance.", "Run it on GKE.", "Run it on Cloud Run."], correct: 0, rationale: "Compute Engine Custom Machine Types allow you to dial up RAM without paying for unnecessary CPU." },
            { id: 24, source: "Premium.pdf | Q.118", text: "You have a website on App Engine standard. You want 1% of your users to see a new test version. You want to minimize complexity. What should you do?", options: ["Deploy new version and use --splits option.", "Deploy new version and use -migrate.", "Create a new App Engine application.", "Configure a network load balancer."], correct: 0, rationale: "App Engine traffic splitting is a native feature." },
            { id: 25, source: "Questions.pdf | Q.224", text: "Which statements about application load testing are true? (Select 2)", options: ["You should test at the maximum load you expect.", "Your load tests should include testing sudden increases in traffic.", "You should test at 50% more than max load.", "It is not necessary to test sudden increases."], correct: 1, rationale: "Usually A and D (Testing max load and spikes) are the correct pair for reliability." },
            
            // FILLING TO 50 WITH MORE HARD QUESTIONS
            { id: 26, source: "Premium.pdf | Q.146", text: "Your company has a single sign-on (SSO) identity provider using SAML. You want users to authenticate using your company's SSO. What should you do?", options: ["In Cloud Identity, set up SSO with Google as identity provider.", "In Cloud Identity, set up SSO with third-party identity provider.", "Obtain OAuth 2.0 credentials.", "Create a VPN."], correct: 1, rationale: "Cloud Identity allows you to configure an external IdP (Identity Provider) for SAML." },
            { id: 27, source: "Questions.pdf | Q.201", text: "Your company wants to deploy several microservices. Each uses different software libraries. You want to enable developers to keep their dev environment in sync with production. Which technology?", options: ["Containers", "Virtual Machines", "Chef/Puppet", "RPM/DEB"], correct: 0, rationale: "Containers package dependencies, ensuring dev=prod parity." },
            { id: 28, source: "Premium.pdf | Q.122", text: "You have a Linux VM that must connect to Cloud SQL. You want to make sure the VM uses a specific service account instead of the default. What should you do?", options: ["Specify the service account under 'Identity and API Access' when creating the VM.", "Download a JSON key and put it in metadata.", "Download a JSON key and save it to ~/.gcloud.", "Grant roles to the default account."], correct: 0, rationale: "Always attach the identity at the infrastructure level (VM config) rather than managing keys." },
            { id: 29, source: "Questions.pdf | Q.237", text: "Which of the following is NOT an IAM best practice?", options: ["Use primitive roles by default.", "Grant roles at smallest scope.", "Treat components as separate trust boundaries.", "Restrict service account creation."], correct: 0, rationale: "Primitive roles (Owner/Editor) are too broad. Use Predefined/Custom." },
            { id: 30, source: "Premium.pdf | Q.111", text: "You are running BigQuery. A partner company needs access to your dataset. They manage their own GCP project. What should you do?", options: ["Ask the partner to create a Service Account in their project, and grant it access in your project.", "Create a SA in your project and give them the key.", "Create a SA in your project and grant it access.", "Ask them to use their personal Gmails."], correct: 0, rationale: "Let them own the identity (SA), you own the permission." },
            { id: 31, source: "Premium.pdf | Q.170", text: "You need to create a Compute Engine instance in a new project that doesn't exist yet. What should you do?", options: ["Create the project, enable API, then create instance.", "Enable API in console, then create.", "Use gcloud with --project flag.", "Look for 'Create In New Project' in console."], correct: 0, rationale: "You cannot create a resource in a non-existent project. Sequence: Create Project -> Enable API -> Create Resource." },
            { id: 32, source: "Premium.pdf | Q.176", text: "Your VMs are running in a subnet 255.255.255.240 (/28). The subnet has no more IPs. You need 10 more IPs. Existing VMs must reach new VMs without extra routes. What do you do?", options: ["Use gcloud to expand the IP range.", "Delete and recreate.", "Create a new project.", "Create a new subnet."], correct: 0, rationale: "Subnet expansion is the only non-destructive way." },
            { id: 33, source: "Premium.pdf | Q.150", text: "You check the status of deployed pods and notice one is PENDING. What is the most likely cause?", options: ["Cluster resource exhaustion (CPU/RAM).", "Image missing.", "App crashed.", "Firewall blocked."], correct: 0, rationale: "Pending = Scheduler cannot find a node to place the pod." },
            { id: 34, source: "Questions.pdf | Q.127", text: "A dev team works with two Cloud Functions (dev/prod). Code is same except for Cloud SQL database values. How should you pass the database value?", options: ["Environment Variables.", "Metadata.", "Service Accounts.", "Timeouts."], correct: 0, rationale: "Env vars are the standard way to inject config into functions." },
            { id: 35, source: "Premium.pdf | Q.109", text: "An external auditor needs to review resources in a specific project. Security has enabled Domain Restricted Sharing. What should you do?", options: ["Create a temporary account for the auditor in Cloud Identity and grant Viewer.", "Ask for their Gmail.", "Grant Security Reviewer.", "Grant Browser."], correct: 0, rationale: "Domain Restricted Sharing prevents granting roles to external emails (Gmail). You must create a user *inside* your domain." },
            { id: 36, source: "Questions.pdf | Q.198", text: "You set up an autoscaling instance group behind an HTTP(S) LB. You notice VMs are terminating and re-launching every minute. They have no public IP. You verified web response via curl. What is the issue?", options: ["Firewall rule missing for LB health checks.", "Firewall rule missing for source traffic.", "Public IP required.", "Tags missing."], correct: 0, rationale: "The LB Health Check comes from specific Google ranges (130.211.0.0/22, 35.191.0.0/16). If firewall blocks this, LB thinks VMs are dead and restarts them." },
            { id: 37, source: "Premium.pdf | Q.38", text: "You have a 5TB AVRO file in Cloud Storage. Analysts proficient only in SQL need access. What is the most cost effective way?", options: ["Create external tables in BigQuery pointing to Cloud Storage.", "Load data into BigQuery.", "Load into Datastore.", "Use Hadoop."], correct: 0, rationale: "External tables allow querying data *in place* without paying for ingestion/storage in BQ (though query cost applies)." },
            { id: 38, source: "Questions.pdf | Q.229", text: "Which statement about encryption on GCP is NOT true?", options: ["If you want to manage keys, the ONLY option is CMEK.", "GCP encrypts at rest by default.", "Keys are encrypted with master keys.", "Data is chunked and encrypted."], correct: 0, rationale: "False. You can also use CSEK (Customer-Supplied Encryption Keys) where you provide the raw key." },
            { id: 39, source: "Premium.pdf | Q.83", text: "You want to avoid specifying the zone with each gcloud command. What should you do?", options: ["Use `gcloud config set compute/zone`.", "Create an alias.", "Set metadata.", "Edit .bashrc."], correct: 0, rationale: "Config properties set defaults." },
            { id: 40, source: "Premium.pdf | Q.76", text: "You need a new Jenkins server deployed with fewest steps. What do you do?", options: ["Use GCP Marketplace.", "Install on Compute Engine.", "Deploy on GKE.", "Use App Engine."], correct: 0, rationale: "Marketplace is 1-click." },
            { id: 41, source: "Questions.pdf | Q.161", text: "A dev team needs service account keys for local dev. You want to follow best practices. What do you do?", options: ["Provide a bucket to download keys (Bad).", "Create a Google Group, assign Service Account User, have devs generate their own keys.", "Commit keys to git (Bad).", "Email keys (Bad)."], correct: 1, rationale: "If keys *must* be used (vs ADC), devs generating their own is better than distributing a shared key." },
            { id: 42, source: "Premium.pdf | Q.149", text: "You run multiple VPC-native GKE clusters in the same subnet. IPs are exhausted. You want to ensure clusters can grow. What do you do?", options: ["Expand the CIDR range of the subnet.", "Create new subnet.", "Add alias IP range.", "Create new VPC."], correct: 0, rationale: "Expansion is non-destructive." },
            { id: 43, source: "Questions.pdf | Q.191", text: "To reduce costs, developers must move dev infra to GCP. Resources start/stop often and require state to persist. You need cost visibility. Which two steps?", options: ["Use persistent disks + Apply Labels for billing export.", "Use local SSD.", "Use auto-delete on disks.", "Store state in Cloud Storage."], correct: 0, rationale: "Persistent disks keep state when VM stops. Labels allow cost tracking in BigQuery export." },
            { id: 44, source: "Questions.pdf | Q.221", text: "If you configured Stackdriver Logging export to BigQuery but logs are not appearing, what is likely cause?", options: ["Stackdriver Logging does not have permission to write to the dataset.", "Firewall rule missing.", "Data Transfer Service not enabled.", "Logs too big."], correct: 0, rationale: "The unique Service Account identity for the Log Sink must be granted `BigQuery Data Editor` on the target dataset." },
            { id: 45, source: "Premium.pdf | Q.47", text: "You deployed an LDAP server on Compute Engine reachable via UDP 636. How do you make it reachable?", options: ["Create an Ingress firewall rule allowing UDP:636 for that instance tag.", "Add a route.", "Create egress rule.", "Use Cloud NAT."], correct: 0, rationale: "Explicitly open the port." },
            { id: 46, source: "Questions.pdf | Q.219", text: "Which two places hold information you can use to monitor the effects of a Cloud Storage lifecycle policy?", options: ["Access logs & Expiration time metadata.", "Lifecycle config file.", "Cloud Monitoring.", "Usage logs."], correct: 0, rationale: "Expiration metadata shows when it *will* happen; Access logs show when it *did* happen." },
            { id: 47, source: "Premium.pdf | Q.70", text: "You are building an app in your data center that uses GCP AutoML. You created a service account. How do you enable authentication from on-prem?", options: ["Create a key file (JSON) for the service account.", "Use Cloud VPN.", "Use user credentials.", "Use Compute Engine credentials."], correct: 0, rationale: "On-prem apps need a Service Account Key file (GOOGLE_APPLICATION_CREDENTIALS)." },
            { id: 48, source: "Premium.pdf | Q.46", text: "You have running instances. You want to change their Service Account. What do you do?", options: ["Use `gcloud compute instances update`.", "Recreate instances.", "Use metadata.", "Use config file."], correct: 0, rationale: "You can update the SA of a stopped instance." },
            { id: 49, source: "Premium.pdf | Q.130", text: "You are building an app with relational data, global users, unknown scale. Which DB?", options: ["Cloud Spanner.", "Cloud SQL.", "Firestore.", "Datastore."], correct: 0, rationale: "Global + Relational + Massive Scale = Spanner." },
            { id: 50, source: "Premium.pdf | Q.3", text: "You need to set up permissions for Compute Engine instances to write data to a specific bucket. Best practice?", options: ["Create SA and add `storage.objectAdmin` role for that bucket.", "Use access scopes.", "Use `objectCreator`.", "Use `cloud-platform` scope."], correct: 0, rationale: "Roles > Scopes. Admin allows overwrite/delete which is often needed." }
        ];

        // --- QUIZ LOGIC ---
        let userAnswers = new Array(questions.length).fill(null);
        let timeLeft = 60 * 60; // 60 mins
        let timerInterval;

        function startQuiz() {
            document.getElementById('welcome-screen').classList.add('hidden');
            document.getElementById('quiz-interface').classList.remove('hidden');
            document.getElementById('quiz-controls').classList.remove('hidden');
            document.getElementById('quiz-controls').classList.add('flex');
            
            renderNavGrid();
            loadQuestion(0);
            timerInterval = setInterval(() => {
                timeLeft--;
                let m = Math.floor(timeLeft / 60).toString().padStart(2,'0');
                let s = (timeLeft % 60).toString().padStart(2,'0');
                document.getElementById('timer').innerText = `${m}:${s}`;
                if(timeLeft <= 0) finishQuiz();
            }, 1000);
        }

        function renderNavGrid() {
            const grid = document.getElementById('nav-grid');
            grid.innerHTML = '';
            questions.forEach((_, i) => {
                const btn = document.createElement('button');
                btn.className = `h-8 w-8 rounded flex items-center justify-center text-xs font-bold transition ${userAnswers[i]!==null ? 'bg-indigo-600 text-white' : 'bg-slate-200 text-slate-500 hover:bg-slate-300'}`;
                btn.innerText = i + 1;
                btn.onclick = () => loadQuestion(i);
                btn.id = `nav-btn-${i}`;
                grid.appendChild(btn);
            });
        }

        function loadQuestion(index) {
            const q = questions[index];
            document.getElementById('q-num').innerText = index + 1;
            document.getElementById('q-source').innerText = q.source;
            document.getElementById('q-text').innerText = q.text;
            document.getElementById('progress-text').innerText = `${index + 1}/${questions.length}`;
            
            const container = document.getElementById('options-container');
            container.innerHTML = '';
            q.options.forEach((opt, i) => {
                const btn = document.createElement('button');
                const isSelected = userAnswers[index] === i;
                btn.className = `w-full text-left p-4 rounded-xl border-2 transition option-card flex items-start gap-3 ${isSelected ? 'option-selected' : 'border-slate-200 bg-white'}`;
                btn.innerHTML = `<div class="mt-0.5 w-5 h-5 rounded-full border-2 flex-shrink-0 flex items-center justify-center ${isSelected ? 'border-indigo-600' : 'border-slate-300'}">${isSelected ? '<div class="w-2.5 h-2.5 bg-indigo-600 rounded-full"></div>' : ''}</div><span class="text-sm font-medium text-slate-700">${opt}</span>`;
                btn.onclick = () => { userAnswers[index] = i; renderNavGrid(); loadQuestion(index); };
                container.appendChild(btn);
            });
            
            // Highlight nav
            document.querySelectorAll('#nav-grid button').forEach(b => b.classList.remove('ring-2', 'ring-indigo-400'));
            document.getElementById(`nav-btn-${index}`).classList.add('ring-2', 'ring-indigo-400');

            // Button logic
            document.getElementById('prev-btn').disabled = index === 0;
            const nextBtn = document.getElementById('next-btn');
            nextBtn.innerText = index === questions.length - 1 ? "Finish" : "Next";
            nextBtn.onclick = index === questions.length - 1 ? finishQuiz : () => loadQuestion(index + 1);
            document.getElementById('prev-btn').onclick = () => loadQuestion(index - 1);
        }

        function finishQuiz() {
            clearInterval(timerInterval);
            document.getElementById('quiz-interface').classList.add('hidden');
            document.getElementById('quiz-controls').classList.remove('flex');
            document.getElementById('quiz-controls').classList.add('hidden');
            document.getElementById('results-screen').classList.remove('hidden');
            
            let correct = 0;
            questions.forEach((q, i) => { if(userAnswers[i] === q.correct) correct++; });
            const score = Math.round((correct/questions.length)*100);
            
            document.getElementById('score-percent').innerText = `${score}%`;
            document.getElementById('stat-correct').innerText = correct;
            document.getElementById('stat-wrong').innerText = questions.length - correct;
            
            const list = document.getElementById('review-list');
            list.innerHTML = '';
            questions.forEach((q, i) => {
                const userAns = userAnswers[i];
                const isRight = userAns === q.correct;
                const item = document.createElement('div');
                item.className = `p-6 rounded-xl border ${isRight ? 'bg-emerald-50 border-emerald-100' : 'bg-rose-50 border-rose-100'}`;
                item.innerHTML = `
                    <div class="flex gap-3 mb-4"><div class="w-8 h-8 rounded-full flex items-center justify-center text-white font-bold shrink-0 ${isRight ? 'bg-emerald-500' : 'bg-rose-500'}">${i+1}</div><div><p class="font-bold text-slate-800 text-sm">${q.text}</p><span class="text-xs text-slate-400">${q.source}</span></div></div>
                    <div class="pl-11 text-sm space-y-2">
                        <div><span class="font-bold text-xs uppercase text-slate-500">Your Answer:</span> <span class="${isRight ? 'text-emerald-700' : 'text-rose-700'} font-bold">${userAns !== null ? q.options[userAns] : 'Skipped'}</span></div>
                        ${!isRight ? `<div><span class="font-bold text-xs uppercase text-slate-500">Correct:</span> <span class="text-emerald-700 font-bold">${q.options[q.correct]}</span></div>` : ''}
                        <div class="mt-2 p-3 bg-white rounded border border-slate-200 text-slate-600"><strong>Explanation:</strong> ${q.rationale}</div>
                    </div>`;
                list.appendChild(item);
            });
        }
    </script>
</body>
</html>